<!DOCTYPE html>
<html>
  <head>
    <title>Sitzordnung</title>
    <style>
      body
      {
      font-family:sans-serif;
      }
      .nameSpan
      {
        border:solid 2px;
      }  
      .rowDiv
      {
        margin:15px;
      }
    </style>
  </head>
  <body>
    <script>
      /*
        I'm working on: 
          1) An animation that changes the color of:
            a) the empty places four times to a random color  *works, but changes color of every place
            b) the new place of the student to red  
            c) the rest of the occupied places to black with white font 
            d) the new empty places to white *only thing that works
          2) Making the page easier to use  ****working on it right now****
      */
      var x = 0;
      var r;
      var g;
      var b;
      var placesArray = [];
      var studentsOnPlace = 0;
      var studentsArray = [];
      var total = 0;
      var columnsRowArray = [];
      var numberOfRowsValueVar;
      var contentVar;
      var numberOfRowsVar;
      var numberOfPlacesVar = 0;
      var studentNameValueVar;
      var studentNrVar = 0;
      var student = function(nickname, place)
      {
      this.nickname = nickname;
      this.place = place; 
      }
      var part1function = function()
      {
        contentVar = document.getElementById("contentDiv");
        numberOfRowsValueVar = Number(document.getElementById("numberOfRowsInput").value);
        if(isNaN(numberOfRowsValueVar))
        {
          alert("Normalerweise wird eine Anzahl als Zahl angegeben!!");
        }
        else if(numberOfRowsValueVar == 0)
        {
          alert("0? Da bringt das Programm ja gar nichts!");
        }
        else
        {
          for(i = 0; i < numberOfRowsValueVar; i++)
          {
            contentVar.innerHTML = contentVar.innerHTML + "<p id='numberOfColumnsRow" + i + "p'>" + 
                                 "Anzahl Plätze in der " + (i + 1) + ". Reihe: <input id='numberOfColumnsRow" + i + "input' /></p>";
          }
          numberOfRowsVar = document.getElementById("numberOfRowsInput");
          numberOfRowsVar.style.visibility = "hidden";
          contentVar.innerHTML = contentVar.innerHTML + '<button id="part1bSubmitButton" onclick="part1bFunction()" >Bestätigen</button>';
        }
      }
      var part1bFunction = function()
      {
        for(i = 0; i < numberOfRowsValueVar; i++)
        {
          columnsRowArray[i] = Number(document.getElementById("numberOfColumnsRow" + i + "input").value);
          if(!isNaN(columnsRowArray[i]))
          {
            total = total + columnsRowArray[i];
          }
          else
          {
            alert("Normalerweise wird eine Anzahl als Zahl angegeben!!");
          }
        }
        contentVar.innerHTML = '<p id="totalP">Insgesamt ' + total + ' Plätze</p>' +
                             '<button id="part2SubmitButton" onclick="part2function()" >weiter</button>';
      }
      var part2function = function()
      {
        contentVar.innerHTML = "<form onsubmit='part2b1function(); return false;'><p>Gib deinen Namen ein:<input id='studentNameInput' autofocus/>"+
                               "<button type='submit' id='studentNameSubmitButton' 11onclick='part2b1function()'>Bestätigen</button></p></from>";
        for(var i = 0; i < columnsRowArray.length; i++)
        {
          contentVar.innerHTML = contentVar.innerHTML + '<div class="rowDiv" id="row' + i + '"></div>'
          for(var j = 0; j < columnsRowArray[i]; j++)
          {
            myRow = document.getElementById("row" + i);
            myRow.innerHTML = myRow.innerHTML + '<span id="row' + i + 'column' + j + '"' + 
                                                'class="nameSpan" >Reihe ' + (i + 1) + ', Platz ' + (j + 1) + '</span>'; 
            var mySpan =  document.getElementById("row" + i + "column" + j);
            placesArray[numberOfPlacesVar] = mySpan;
            numberOfPlacesVar ++;
          }
        }
      }
      var part2b1function = function()
      {
        animationFunction();
        setTimeout(part2bFunction, 2000);
      }
      var animationFunction = function()
      {
        for(var i = 0; i < columnsRowArray.length; i++)
        {
          for(var j = 0; j < columnsRowArray[i]; j++)
          { 
            r = Math.floor(Math.random() * 255 + 100);
            g = Math.floor(Math.random() * 255 + 100);
            b = Math.floor(Math.random() * 255 + 100);
            document.getElementById("row" + i + "column" + j).style.background = "rgb(" + r + ", " + g + ", " + b + ")";
          }
        }
        if(x < 5)
        {
          x ++;
          setTimeout(animationFunction, 400);
        }
        else
        {
          for(var i = 0; i < columnsRowArray.length; i++)
          {
            for(var j = 0; j < columnsRowArray[i]; j++)
            {
              document.getElementById("row" + i + "column" + j).style.background = "rgb(255, 255, 255)";
            }
          }
          x = 0;
        }
      }
      var part2bFunction = function()
      {
        if(studentsOnPlace != total)
        {
          studentNameValueVar = document.getElementById("studentNameInput").value;
          document.getElementById("studentNameInput").value = "";
          document.getElementById("studentNameInput").focus();
          myRandomNumber = Math.floor(Math.random() * (total - studentsOnPlace));
          studentsArray[studentNrVar] = new student(studentNameValueVar, myRandomNumber);
          //placesArray[myRandomNumber].innerHTML = studentsArray[studentNrVar].nickname;
          document.getElementById(placesArray[myRandomNumber].id).innerHTML = studentsArray[studentNrVar].nickname;
          document.getElementById(placesArray[myRandomNumber].id).style.background = "rgb(255, 0, 0)";
          for(var i = myRandomNumber; i < total; i++)
          {
            placesArray[i] = placesArray[(i + 1)];
          }
          placesArray[(total - 1)] = null;
          studentNrVar ++;
          studentsOnPlace ++;
        }
      }
    </script>
    <h1>Sitzordnung</h1>
    <div id="contentDiv">
      <p id="numberOfRowsP">Anzahl Reihen:
        <input id="numberOfRowsInput" />
        <button id="part1submitButton" onclick="part1function()">Bestätigen</button>
      </p>
    </div>
    <script>
      alert("Wird bearbeitet. Ich würde Ihnen empfehlen 'eskottova.github.io/SitzordnungAlt' zu verwenden");
    </script>
  </body>
</html>
