<!DOCTYPE html>
<html>
  <head>
    <title>Sitzordnung</title>
    <style>
      body
      {
      font-family:sans-serif;
      }
      .nameSpan
      {
        border:solid 2px;
      }  
    </style>
  </head>
  <body>
    <script>
      var mySpan;
      var placesArray = [];
      var studentsOnPlace = 0;
      var studentsArray = [];
      var total = 0;
      var columnsRowArray = [];
      var numberOfRowsValueVar;
      var contentVar;
      var numberOfRowsVar;
      var numberOfPlacesVar = 0;
      var studentNameValueVar;
      var studentNrVar = 0;
      var totalVar = 0;
      var student = function(nickname, place)
      {
      this.nickname = nickname;
      this.place = place; 
      }
      var part1function = function()
      {
        contentVar = document.getElementById("contentDiv");
        numberOfRowsValueVar = Number(document.getElementById("numberOfRowsInput").value);
        if(isNaN(numberOfRowsValueVar))
        {
          alert("Normalerweise wird eine Anzahl als Zahl angegeben!!");
        }
        else if(numberOfRowsValueVar == 0)
        {
          alert("0? Da bringt das Programm ja gar nichts!");
        }
        else
        {
          for(i = 0; i < numberOfRowsValueVar; i++)
          {
            contentVar.innerHTML = contentVar.innerHTML + "<p id='numberOfColumnsRow" + i + "p'>" + 
                                 "Anzahl Plätze in der " + (i + 1) + ". Reihe: <input id='numberOfColumnsRow" + i + "input' /></p>";
          }
          numberOfRowsVar = document.getElementById("numberOfRowsInput");
          numberOfRowsVar.style.visibility = "hidden";
          contentVar.innerHTML = contentVar.innerHTML + '<button id="part1bSubmitButton" onclick="part1bFunction()" >Bestätigen</button>';
        }
      }
      var part1bFunction = function()
      {
        for(i = 0; i < numberOfRowsValueVar; i++)
        {
          columnsRowArray[i] = Number(document.getElementById("numberOfColumnsRow" + i + "input").value);
          if(!isNaN(columnsRowArray[i]))
          {
            total = total + columnsRowArray[i];
          }
          else
          {
            alert("Normalerweise wird eine Anzahl als Zahl angegeben!!");
          }
        }
        contentVar.innerHTML = '<p id="totalP">Insgesamt ' + total + ' Plätze</p>' +
                             '<button id="part2SubmitButton" onclick="part2function()" >weiter</button>';
      }
      var part2function = function()
      {
        contentVar.innerHTML = "<p>Gib deinen Namen ein:<input id='studentNameInput' />"+
                               "<button id='studentNameSubmitButton' onclick='part2bFunction()'>Bestätigen</button></p>";
        for(var i = 0; i < columnsRowArray.length; i++)
        {
          contentVar.innerHTML = contentVar.innerHTML + '<div id="row' + i + '"></div>'
          for(var j = 0; j < columnsRowArray[i]; j++)
          {
          myRow = document.getElementById("row" + i);
          myRow.innerHTML = myRow.innerHTML + '<span id="row' + i + 'column' + j + '" class="nameSpan" >row' + i + 'column' + j + '</span>'; 
          mySpan = document.getElementById("row' + i + 'column' + j + '");
          placesArray[numberOfPlacesVar] = mySpan;
          numberOfPlacesVar ++;
          }
        }
      }
      var part2bFunction = function()
      {
        studentNameValueVar = document.getElementById("studentNameInput").value;
        myRandomNumber = Math.floor(Math.random() * (total - (studentsOnPlace + 1)));
        studentsArray[studentNrVar] = new student(studentNameValueVar, myRandomNumber);
        placesArray[myRandomNumber - 1].innerHTML = studentsArray[studentNrVar].nickname;
        for(var i = myRandomNumber; i < total; i++)
        {
          placesArray[(i - 1)] = placesArray[1];
        }
        studentNrVar ++;
        studentsOnPlace ++;
        totalVar = 0;
      }
    </script>
    <h1>Sitzordnung</h1>
    <div id="contentDiv">
      <p id="numberOfRowsP">Anzahl Reihen:
        <input id="numberOfRowsInput" />
        <button id="part1submitButton" onclick="part1function()">Bestätigen</button>
      </p>
    </div>
  </body>
</html>
